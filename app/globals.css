@tailwind base;

:root {
  --ia-panel-bg: rgba(12, 10, 35, 0.8); /* dark indigo panel */
  --ia-panel-border: rgba(79, 70, 229, 0.6); /* indigo-600/60 */
  --ia-outline: rgba(99, 102, 241, 0.25); /* subtle indigo outline */
  --ia-accent-blue: rgba(59, 130, 246, 1); /* blue-500 */
  --ia-accent-cyan: rgba(6, 182, 212, 1); /* cyan-500 */
  --ia-accent-teal: rgba(20, 184, 166, 1); /* teal-500 */
}

.dark {
  --ia-panel-bg: rgba(12, 6, 24, 0.8);
  --ia-panel-border: rgba(79, 70, 229, 0.6);
  --ia-outline: rgba(99, 102, 241, 0.25);
  --ia-accent-blue: rgba(59, 130, 246, 1);
  --ia-accent-cyan: rgba(6, 182, 212, 1);
  --ia-accent-teal: rgba(20, 184, 166, 1);
}
@tailwind components;
@tailwind utilities;

/* writersarcade Brand Theme Variables */
:root {
  /* Brand colors - will be overridden by ThemeWrapper for dynamic theming */
  --writersarcade-primary: #6366f1;      /* Indigo - main brand color */
  --writersarcade-secondary: #8b5cf6;    /* Purple - secondary brand color */
  --writersarcade-accent: #ec4899;       /* Pink - accent color */
  --writersarcade-success: #10b981;      /* Green - success states */
  --writersarcade-warning: #f59e0b;      /* Amber - warning states */
  --writersarcade-error: #ef4444;        /* Red - error states */
  --writersarcade-info: #3b82f6;         /* Blue - info states */
}

.dark {
  /* Dark mode brand colors */
  --writersarcade-primary: #818cf8;      /* Lighter indigo for visibility */
  --writersarcade-secondary: #a78bfa;    /* Lighter purple */
  --writersarcade-accent: #f472b6;       /* Lighter pink */
  --writersarcade-success: #34d399;      /* Lighter green */
  --writersarcade-warning: #fbbf24;      /* Lighter amber */
  --writersarcade-error: #f87171;        /* Lighter red */
  --writersarcade-info: #60a5fa;         /* Lighter blue */
}

/* ─── CSS Variable Colour Tokens ───────────────────────────────────────────
   SEMANTICS:
   • :root  = light mode (Sun icon, no .dark class on <html>)
   • .dark  = dark mode  (Moon icon, .dark class added by DarkModeProvider)
   
   The app defaults to dark mode (DarkModeProvider initialises isDarkMode=true).
   html always starts with className="dark" in layout.tsx.
   
   PREVIOUS BUG: :root had black bg and .dark had white bg — these were inverted,
   meaning shadcn/ui components using CSS variables rendered backwards.
   This is now corrected.
   ─────────────────────────────────────────────────────────────────────────── */
@layer base {
  :root {
    /* Light mode — activated when user toggles to Sun/day */
    --background: 0 0% 98%;
    --foreground: 0 0% 3%;
    --card: 0 0% 96%;
    --card-foreground: 0 0% 3%;
    --popover: 0 0% 98%;
    --popover-foreground: 0 0% 3%;
    --primary: 271 81% 56%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 90%;
    --secondary-foreground: 0 0% 10%;
    --muted: 0 0% 90%;
    --muted-foreground: 0 0% 40%;
    --accent: 0 0% 90%;
    --accent-foreground: 0 0% 10%;
    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 82%;
    --input: 0 0% 88%;
    --ring: 271 81% 56%;
    --radius: 0.5rem;
  }

  .dark {
    /* Dark mode — default state (Moon icon) */
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 271 81% 65%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 271 81% 65%;
    --radius: 0.5rem;
  }
}

@layer base {
  * {
    @apply border-border;
    /* Prevent double-tap zoom via CSS — this is preferred over the
       {passive: false} touchmove event listener in useMobileOptimizations.ts
       because it doesn't block native scroll performance.
       Works on iOS Safari 13+ and all modern Android browsers. */
    touch-action: manipulation;
  }

  /* Restore natural scroll behaviour for scrollable containers */
  [data-scroll], .overflow-auto, .overflow-y-auto, .overflow-x-auto,
  [role="listbox"], [role="grid"] {
    touch-action: pan-y;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Game-specific styles from original */
.game-container {
  @apply max-w-4xl mx-auto p-4;
}

.game-text {
  @apply prose prose-invert max-w-none;
}

.game-options {
  @apply space-y-2 mt-4;
}

.game-option {
  @apply bg-gray-800 hover:bg-gray-700 transition-colors p-3 rounded cursor-pointer border border-gray-600;
}

.chat-message {
  @apply mb-4 p-4 rounded-lg;
}

.chat-user {
  @apply bg-blue-900/50 border-l-4 border-blue-500;
}

.chat-assistant {
  @apply bg-gray-800/50 border-l-4 border-purple-500;
}

/* writersarcade Thematic Enhancements - Typewriter + Arcade Hybrid */
.writersarcade-theme {
  /* Vintage paper texture background */
  background: #F5F5DC url('/images/textures/paper-texture.png') repeat;
  /* Typewriter paper lines */
  background-size: auto, 100% 25px;
}

/* Dark mode version of writersarcade theme */
.dark .writersarcade-theme {
  background: #1a1a1a url('/images/textures/paper-texture-dark.png') repeat;
  color: #e0e0e0;
}

/* Dark mode paper styling */
.dark .writersarcade-paper {
  background: #2a2a2a;
  border: 1px solid #5a5a5a;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
}

/* Dark mode paper lines */
.dark .writersarcade-paper::before {
  background: repeating-linear-gradient(to bottom,
      transparent,
      transparent 24px,
      #5a5a5a 25px,
      #5a5a5a 26px,
      transparent 27px);
  opacity: 0.15;
}

/* Dark mode typewriter font - improved contrast */
.dark .typewriter-font {
  color: #ffffff;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

/* Dark mode text colors for better readability */
.dark .text-black {
  color: #ffffff !important;
}

.dark .text-gray-600 {
  color: #c0c0c0 !important;
}

.dark .text-gray-700 {
  color: #e0e0e0 !important;
}

/* Dark mode comic bubbles */
.dark .comic-bubble li {
  background: #2a2a2a;
  border: 2px solid #5a5a5a;
  color: #e0e0e0;
}

/* Dark mode typewriter input */
.dark .typewriter-input {
  background: #3a3a3a;
  border: 2px solid #5a5a5a;
  color: #e0e0e0;
}

/* Dark mode arcade marquee */
.dark .arcade-marquee {
  background: linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%);
  border: 3px double #5a5a5a;
}

/* Dark mode game type options */
.dark .game-type-option {
  background: #3a3a3a;
  border: 2px solid #5a5a5a;
  color: #e0e0e0;
}

.dark .game-type-option:hover {
  background: #4a4a4a;
}

.dark .game-type-option.active {
  background: #008080;
  color: white;
  border-color: #00FFFF;
}

/* Dark mode genre selector specific styling */
.dark .game-type-option:not(.active) {
  background: #2a2a2a;
  border-color: #4a4a4a;
  color: #e0e0e0;
}

.dark .game-type-option:not(.active):hover {
  background: #3a3a3a;
  border-color: #6a6a6a;
}

/* Dark mode text colors for genre labels */
.dark .text-purple-200 {
  color: #c0c0c0 !important;
}

.dark .text-purple-500\/50 {
  border-color: #4a4a4a !important;
}

.dark .bg-purple-900\/20 {
  background: #2a2a2a !important;
}

.dark .hover\:border-purple-400:hover {
  border-color: #6a6a6a !important;
}

.dark .hover\:bg-purple-900\/40:hover {
  background: #3a3a3a !important;
}

.writersarcade-paper {
  background: white;
  border: 1px solid #3A2E1D;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  position: relative;
}

/* Typewriter paper lines effect */
.writersarcade-paper::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(to bottom,
      transparent,
      transparent 24px,
      #3A2E1D 25px,
      #3A2E1D 26px,
      transparent 27px);
  opacity: 0.1;
  pointer-events: none;
}

/* Arcade button styling */
.arcade-button {
  background: #008080;
  color: white;
  border: none;
  padding: 1rem 2rem;
  font-size: 1.2rem;
  font-weight: bold;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  box-shadow: 0 4px 0 #004D4D;
}

.arcade-button:hover {
  background: #00FFFF;
  transform: translateY(-2px);
  box-shadow: 0 6px 0 #004D4D;
}

/* Typewriter font for headings */
.typewriter-font {
  font-family: 'Special Elite', 'Courier New', monospace;
  color: #3A2E1D;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
}

/* Comic book speech bubble styling */
.comic-bubble {
  list-style: none;
  padding: 0;
}

.comic-bubble li {
  background: white;
  border: 2px solid #3A2E1D;
  border-radius: 20px;
  padding: 0.8rem 1.5rem;
  margin: 0.5rem 0;
  position: relative;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
  color: #3A2E1D;
}

.comic-bubble li::before {
  content: "•";
  position: absolute;
  left: -10px;
  top: 10px;
  background: #FFD700;
  color: #3A2E1D;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

/* Genre icon styling */
.genre-icon {
  width: 24px;
  height: 24px;
  fill: #3A2E1D;
  transition: all 0.2s ease;
}

.genre-icon:hover {
  fill: #FFD700;
  transform: scale(1.1);
}

/* Dark mode genre icons - improved contrast */
.dark .genre-icon {
  fill: #e0e0e0;
}

.dark .genre-icon:hover {
  fill: #FFD700;
}

/* Typewriter input styling */
.typewriter-input {
  background: #F5F5DC;
  border: 2px solid #3A2E1D;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  font-family: 'Courier New', monospace;
  color: #3A2E1D;
}

.typewriter-input:focus {
  outline: none;
  border-color: #FFD700;
  box-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
}

/* Arcade marquee header effect */
.arcade-marquee {
  background: linear-gradient(135deg, #FFD700 0%, #F5F5DC 100%);
  border: 3px double #3A2E1D;
  border-radius: 8px;
  padding: 1rem;
  position: relative;
}

.arcade-marquee::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 10px;
  right: 10px;
  height: 10px;
  background: repeating-linear-gradient(90deg,
      #3A2E1D,
      #3A2E1D 5px,
      transparent 5px,
      transparent 10px);
}

/* Game type selector with arcade styling */
.game-type-selector {
  display: flex;
  gap: 1rem;
  margin: 1.5rem 0;
}

.game-type-option {
  flex: 1;
  padding: 1rem;
  background: #F5F5DC;
  border: 2px solid #3A2E1D;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  color: #3A2E1D;
}

.game-type-option:hover {
  background: #FFD700;
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.game-type-option.active {
  background: #008080;
  color: white;
  border-color: #00FFFF;
}

/* Typewriter key effect for buttons */
.game-type-option::before {
  content: "";
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border: 2px solid #3A2E1D;
  border-radius: 6px;
  z-index: -1;
}

/* Mobile-specific optimizations - ENHANCED */
@media (max-width: 768px) {

  /* Improve touch target sizes - AGGRESSIVE CONSOLIDATION */
  button,
  [role="button"],
  a,
  .btn-enhanced {
    min-height: 48px;
    min-width: 48px;
    padding: 0.75rem 1rem;
  }

  /* Better spacing for mobile */
  .game-option {
    @apply p-4;
  }

  /* Optimize text readability on small screens */
  .game-text {
    @apply text-base leading-relaxed;
  }

  /* Prevent horizontal scrolling */
  html {
    overflow-x: hidden;
  }

  /* Better mobile scrolling */
  body {
    -webkit-overflow-scrolling: touch;
  }

  /* Optimize form inputs for mobile */
  input,
  textarea,
  select {
    font-size: 16px;
    padding: 12px 16px;
  }

  /* Responsive typography adjustments */
  h1 {
    @apply text-3xl;
  }

  h2 {
    @apply text-2xl;
  }

  /* Mobile-friendly card padding */
  .card,
  .card-enhanced {
    @apply p-4;
  }

  /* Mobile-specific animations - PERFORMANT */
  .animate-fade-in {
    animation-duration: 0.2s;
  }

  .animate-slide-in {
    animation-duration: 0.2s;
  }

  /* Mobile button enhancements */
  .btn-enhanced {
    transform: none !important;
    box-shadow: none !important;
  }

  /* Mobile card enhancements */
  .card-enhanced {
    transform: none !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {

  /* Larger tap targets */
  button,
  [role="button"],
  a {
    padding: 12px 16px;
  }

  /* Remove hover effects on touch devices */
  *:hover>* {
    transform: none !important;
  }

  /* Specific touch device styles */
  .no-hover-effect {
    transition: none !important;
  }
}

/* Reduced motion support for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .animate-in {
    opacity: 1 !important;
    transform: none !important;
  }
}

/* Focus indicator improvements */
.focus-visible {
  outline: 2px solid #8b5cf6;
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  button {
    border: 2px solid;
  }

  .border {
    border-width: 2px !important;
  }
}

/* Dynamic viewport height — fixes iOS Safari 100vh including address bar.
   Use .dvh-screen instead of min-h-screen for full-screen game views. */
.dvh-screen { min-height: 100dvh; }
.h-dvh      { height: 100dvh; }

/* writersarcade Enhanced Utility Classes - Core Principles Edition */
@layer utilities {
  /* Brand color utilities - ENHANCEMENT FIRST approach */
  .bg-writersarcade-primary {
    background-color: var(--writersarcade-primary);
  }

  .text-writersarcade-primary {
    color: var(--writersarcade-primary);
  }

  .border-writersarcade-primary {
    border-color: var(--writersarcade-primary);
  }
  
  /* Animation utilities - AGGRESSIVE CONSOLIDATION */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .animate-slide-in {
    animation: slideIn 0.3s ease-out;
  }
  
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(-20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  /* Used by mobile filter drawer on /games page */
  .animate-slide-in-up {
    animation: slideInUp 0.25s cubic-bezier(0.32, 0.72, 0, 1);
  }

  @keyframes slideInUp {
    from { opacity: 0; transform: translateY(100%); }
    to   { opacity: 1; transform: translateY(0); }
  }
  
  /* Enhanced card styles - PREVENT BLOAT by reusing existing patterns */
  .card-enhanced {
    background: var(--card);
    border: 1px solid rgba(100, 100, 100, 0.1);
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease;
  }
  
  .card-enhanced:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
  }
  
  /* Enhanced button styles - DRY approach */
  .btn-enhanced {
    position: relative;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    transform: translateZ(0);
  }
  
  .btn-enhanced:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  
  .btn-enhanced:active {
    transform: translateY(0);
  }
  
  /* Loading spinner with brand colors - MODULAR design */
  .loading-spinner {
    width: 24px;
    height: 24px;
    border: 3px solid rgba(100, 100, 100, 0.2);
    border-top-color: var(--writersarcade-primary);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }

  /* Success checkmark animation - CLEAN separation */
  .success-checkmark {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--writersarcade-success);
    display: flex;
    align-items: center;
    justify-content: center;
    animation: bounce 0.5s ease;
  }

  @keyframes bounce {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }

  /* Error state with brand colors */
  .error-state {
    color: var(--writersarcade-error);
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 8px;
    padding: 0.75rem;
  }

  /* Warning state with brand colors */
  .warning-state {
    color: var(--writersarcade-warning);
    background: rgba(245, 158, 11, 0.1);
    border: 1px solid rgba(245, 158, 11, 0.2);
    border-radius: 8px;
    padding: 0.75rem;
  }
  
  /* Info state with brand colors */
  .info-state {
    color: var(--writersarcade-info);
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 8px;
    padding: 0.75rem;
  }
}